---
title: Server Side
layout: default
---

# Meilisearch Server Side

::alert{type="danger"}
ðŸš¨ðŸš¨ **Breaking CHANGE** ðŸš¨ðŸš¨
::

From v0.4.0 and above, you access to Meilisearch with `$meilisearch` instead of event.  
ðŸ›‘ ~~`const { serverMeilisearchClient } = event.context`~~

âœ… `$meilisearch`

The aim is to optimize performance and avoid to create a new instance for each request, no more `event.context` binding.

---

### Configuration

You can to manage documents, indexes or preferences from Nuxt server side.
To do so, first enable it

```ts{}[nuxt.config.ts]
meilisearch: {
  ...
  serverSideUsage: true, // default false
  adminApiKey: '<your_secret_key>',
  ...
}
```

::alert{type="info"}
You need to provide API KEY with **ADMIN ACCESS**
::


### Usage

Now you can use the `$meilisearch` instance from your server side code.

Full exemple:

```ts{}[my-endpoint.ts]

export default defineEventHandler(async (event) => {

  // read from body
  const body = await readBody(event)

  // Meiliseach is available with $meilisearch
  const meilisearchResponse = $meilisearch.index('books').addDocuments(body)

  return meilisearchResponse
  

})

```

### Typescript

`$meilisearch` is full typed so you can enjoy the full power of typescript, autocomplete and intellisense.

### Full example

From your API server route, you can add a document to specific index.

```ts{}[server/api/myRoute]
export default defineEventHandler(async (event) => {

  
   const addRecordRes = await $meilisearch.index('movies').addDocuments(
     {
       id: 999999994234,
       title: 'Batman Unmasked: The Psychology of the Dark Knight',
       poster: 'https://image.tmdb.org/t/p/w1280/jjHu128XLARc2k4cJrblAvZe0HE.jpg',
       overview: 'Delve into the world of Batman and the vigilante justice tha',
       release_date: '2008-07-15'
     }
   )

   return { myCustomResponse: "Document is on the way...." }
}
```
